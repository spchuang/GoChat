{"version":3,"file":"../web/js/dist/web/SimulateBoardContainer.dev.js","sources":["webpack:///webpack/bootstrap a0a4e76dea3fe35597e2","webpack:///public/src/js/web/SimulateBoardContainer.jsx","webpack:///external \"React\"","webpack:///external \"ReactDOM\"","webpack:///./~/classNames/index.js","webpack:///public/src/js/common/OverlaySpinner.jsx","webpack:///public/src/js/common/GoBoardPlayer.jsx","webpack:///external \"WGo\"","webpack:///./~/deep-equal/index.js","webpack:///./~/deep-equal/lib/keys.js","webpack:///./~/deep-equal/lib/is_arguments.js","webpack:///./~/invariant/browser.js","webpack:///./~/process/browser.js","webpack:///public/src/js/common/UserLoaderContainer.jsx","webpack:///external \"jQuery\"","webpack:///public/src/js/common/Footer.jsx","webpack:///public/src/js/common/FooterWrapper.jsx","webpack:///public/src/js/common/WebViewUtils.js","webpack:///external \"MessengerExtensions\""],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a0a4e76dea3fe35597e2\n **/","/*\n * @flow\n */\n\n'use strict';\n\nimport React, {PropTypes} from 'react';\nimport ReactDOM from 'react-dom';\nimport classNames from 'classNames';\nimport OverlaySpinner from '../common/OverlaySpinner.jsx';\nimport GoBoardPlayer from '../common/GoBoardPlayer.jsx';\nimport UserLoaderContainer from '../common/UserLoaderContainer.jsx';\n\nconst BOARD_SIZES_OPTIONS: Array<BoardSize> = [9, 13, 19];\nconst EMPTY_BOARD_ID = 'empty';\n\ntype SelectedGameType = number | 'empty';\ntype State = {\n  selectedGameID: SelectedGameType;\n  emptyBoardSize: BoardSize;\n};\n\nclass SimulateBoardContainer extends React.Component {\n  state: State;\n\n  static propTypes = {\n    userID: PropTypes.string.isRequired,\n    text: PropTypes.object.isRequired,\n    games: PropTypes.array.isRequired,\n    focusedOnGameID: PropTypes.number,\n  };\n\n  constructor(props: Object) {\n    super(props);\n    this.state = {\n      selectedGameID: props.focusedOnGameID\n        ? props.focusedOnGameID\n        : EMPTY_BOARD_ID,\n      emptyBoardSize: 19,\n    };\n  }\n\n  render(): React.Element<*> {\n    const error = this._userNotInGames()\n      ? this._renderInfoAlert(this.props.text.noGameMessage)\n      : null;\n\n    let layout;\n    let game;\n    if (this.state.selectedGameID === EMPTY_BOARD_ID) {\n      // load an empty board type\n      layout = {\n        top: ['Control'],\n      };\n      game = {\n        move: 0,\n        sgf: `(;SZ[${this.state.emptyBoardSize}])`,\n      }\n    } else {\n      game = this.props.games.find((g) => g.id === this.state.selectedGameID);\n      console.log(game);\n      layout = {\n        top: ['Control', 'InfoBox'],\n      };\n    }\n    return (\n      <div className=\"createGameWrapper\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-xs-12 col-sm-10 col-sm-offset-1 col-md-6 col-md-offset-3\">\n              {error}\n              {this._renderGameSelector()}\n              {this._renderEmptyBoardSizeSelector()}\n              <GoBoardPlayer\n                layout={{top: ['Control', 'InfoBox']}}\n                move={game.move}\n                sgf={game.sgf}\n                mode='edit'\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  _userNotInGames(): boolean {\n    return this.props.games.length === 0;\n  }\n\n  _renderGameSelector(): ?React.Element<*> {\n    // when we load gameID directly, we only wnat to view that game.\n    if (this.props.loadSingleGameOnly) {\n      return null;\n    }\n\n    if (this._userNotInGames()) {\n      return null;\n    }\n\n    const options = this.props.games.map((game: Object) => {\n      const id = game.id;\n      return (\n        <option key={id} value={id}>\n          {game.opponentName}\n        </option>\n      );\n    });\n\n    return (\n      <div className=\"form-horizontal\">\n        <div className=\"form-group\">\n          <label className=\"col-sm-3 control-label\">{this.props.text.selectGameLabel}</label>\n          <div className=\"col-sm-9\">\n            <select\n              className=\"form-control\"\n              value={this.state.selectedGameID}\n              onChange={this._handleGameChange}>\n              {options}\n              <option value={EMPTY_BOARD_ID}>{this.props.text.emptyBoardOption}</option>\n            </select>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  _renderEmptyBoardSizeSelector(): ?React.Element<*> {\n    if (this.state.selectedGameID !== EMPTY_BOARD_ID) {\n      return null;\n    }\n    const options = BOARD_SIZES_OPTIONS.map((size: number) => {\n      return (\n        <option key={size} value={size}>{size}</option>\n      );\n    });\n\n    return (\n      <div className=\"form-horizontal\">\n        <div className=\"form-group\">\n          <label className=\"col-sm-3 control-label\">{this.props.text.selectBoardSizeLabel}</label>\n          <div className=\"col-sm-9\">\n            <select\n              className=\"form-control\"\n              value={this.state.emptyBoardSize}\n              onChange={this._handleBoardSizeChange}>\n              {options}\n            </select>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  _handleBoardSizeChange = (evt: Object): void => {\n    this.setState({emptyBoardSize: evt.target.value});\n  }\n\n  _handleGameChange = (evt: Object): void => {\n    this.setState({selectedGameID: evt.target.value});\n  }\n\n  _renderInfoAlert(errorText: string): React.Element<*> {\n    return (\n      <div className=\"alertHeader alert alert-info\" role=\"alert\">\n        {errorText}\n      </div>\n    );\n  }\n}\n\nUserLoaderContainer.setup(SimulateBoardContainer);\n\n\n\n/** WEBPACK FOOTER **\n ** public/src/js/web/SimulateBoardContainer.jsx\n **/","module.exports = React;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"React\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = ReactDOM;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ReactDOM\"\n ** module id = 2\n ** module chunks = 0\n **/","/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/classNames/index.js\n ** module id = 3\n ** module chunks = 0\n **/","/*\n * @flow\n */\n\n'use strict';\n\nimport React, {PropTypes} from 'react';\n\nclass OverlaySpinner extends React.PureComponent {\n  render(): React.Element<*> {\n    return (\n      <div className=\"spinnerOverlay\">\n        <div className=\"spinner\"></div>\n      </div>\n    );\n  }\n}\n\nmodule.exports = OverlaySpinner;\n\n\n\n/** WEBPACK FOOTER **\n ** public/src/js/common/OverlaySpinner.jsx\n **/","/*\n * @flow\n */\n\n'use strict';\n\nimport React, {PropTypes} from 'react';\nimport ReactDOM from 'react-dom';\nimport WGo from 'WGo';\nimport equal from 'deep-equal';\nimport invariant from 'invariant';\n\nconst WGoPlayerConfig = {\n  board: {\n    background: '/web/images/wood1.jpg',\n  },\n  enableWheel: false,\n  lockScroll: false,\n  update: (e) => {\n    // do something later\n  },\n};\n\ntype Props = {\n  mode: 'edit' | 'score' | 'view',\n  viewBoard?: ?Array<Array<Object>>,\n  layout: Object,\n  move?: number,\n  sgf?: string,\n  onScoreUpdate?: (scores: {\n    blackTerritory: number,\n    blackCapture: number,\n    whiteTerritory: number,\n    whiteCapture: number,\n    komi: number,\n  }) => void,\n};\n\nclass GoBoardPlayer extends React.PureComponent {\n  props: Props;\n  state: Object;\n  _playerDiv: ?Object;\n  _player: ?Object;\n  _score_mode: ?Object;\n\n  componentDidMount(): void {\n    this._updateWGoPlayer();\n  }\n\n  componentDidUpdate(prevProps: Object, prevState: Object): void {\n    this._updateWGoPlayer();\n  }\n  shouldComponentUpdate(nextProps: Object, nextState: Object): boolean {\n    return !equal(nextProps, this.props);\n  }\n\n  _updateWGoPlayer(): void {\n    this._player = new WGo.BasicPlayer(this._playerDiv, {\n      ...WGoPlayerConfig,\n      layout: this.props.layout,\n      move: this.props.move,\n      sgf: this.props.sgf,\n    });\n\n    if (this.props.mode === 'view') {\n      // load the board based on prop instead of sgf\n      this._player.board.removeAllObjects();\n      invariant(this.props.viewBoard, 'for flow');\n      this.props.viewBoard.forEach(rowObjects => {\n        invariant(this._player, 'for flow');\n        this._player.board.addObject(rowObjects);\n      })\n    } else if (this.props.mode === 'score') {\n      this._player.setFrozen(true);\n\n      invariant(this._player, 'for flow');\n  \t\tthis._score_mode = new WGo.ScoreMode(\n        this._player.kifuReader.game.position,\n        this._player.board,\n        this._player.kifu.info.KM || 0,\n        this._handleScoreUpdate,\n      );\n  \t\tthis._score_mode.start();\n    } else if (this.props.mode === 'edit') {\n      const editable = new WGo.Player.Editable(this._player, this._player.board);\n      editable.set(true);\n    } else {\n      throw new Error (\"invalid player mode\");\n    }\n  }\n\n  _handleScoreUpdate = (msg: string): void => {\n    // WGO player returns html message for scores so\n    // I need to manually transform them\n    var text = msg.replace(/<(?:.|\\n)*?>/gm, '').replace(/ /g,'');\n\n    // \\d+(\\.\\d{1,2})? matches decimal\n    var m = text.match(/((\\d+(\\.\\d{1,2})?)\\+)+(\\d+(\\.\\d{1,2})?)=(\\d+(\\.\\d{1,2})?)/g);\n    invariant(m, 'for flow');\n\n    // territory + x, territory + w + komi\n    const blackScores = m[0].split('=')[0].split('+').map((num) => parseFloat(num));\n    const whiteScores = m[1].split('=')[0].split('+').map((num) => parseFloat(num));\n\n    this.props.onScoreUpdate && this.props.onScoreUpdate({\n      blackTerritory: blackScores[0],\n      blackCapture: blackScores[1],\n      whiteTerritory: whiteScores[0],\n      whiteCapture: whiteScores[1],\n      komi: whiteScores[2],\n    });\n  };\n\n  getWGOPlayer(): ?Object {\n    return this._player;\n  }\n\n  getBoardObject(): Array<Array<Object>> {\n    invariant(this._player, 'for flow');\n    return this._player.board.obj_arr;\n  }\n\n  render(): React.Element<*> {\n    return <div ref={(playerDiv) => { this._playerDiv = playerDiv; }} />;\n  }\n}\n\nmodule.exports = GoBoardPlayer;\n\n\n\n/** WEBPACK FOOTER **\n ** public/src/js/common/GoBoardPlayer.jsx\n **/","module.exports = WGo;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"WGo\"\n ** module id = 6\n ** module chunks = 0\n **/","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/deep-equal/index.js\n ** module id = 7\n ** module chunks = 0\n **/","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/deep-equal/lib/keys.js\n ** module id = 8\n ** module chunks = 0\n **/","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/deep-equal/lib/is_arguments.js\n ** module id = 9\n ** module chunks = 0\n **/","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function(condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n        'for the full error message and additional helpful warnings.'\n      );\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(\n        format.replace(/%s/g, function() { return args[argIndex++]; })\n      );\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/invariant/browser.js\n ** module id = 10\n ** module chunks = 0\n **/","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/process/browser.js\n ** module id = 11\n ** module chunks = 0\n **/","/*\n * @flow\n */\n\n'use strict';\n\nimport $ from 'jquery';\nimport React, {PropTypes} from 'react';\nimport ReactDOM from 'react-dom';\nimport classNames from 'classNames';\nimport OverlaySpinner from '../common/OverlaySpinner.jsx';\nimport Footer from '../common/Footer.jsx';\nimport WebViewUtils from './WebViewUtils.js';\n\ntype Props = {\n  userID?: string,\n  text: Object,\n  Component: Object,\n  jsonURL: string,\n};\n\ntype State = {\n  userID: ?string,\n  componentProps: ?Object,\n  error: ?string,\n  showTokenInput: boolean,\n  loading: boolean,\n  token: string,\n};\n\nclass UserLoaderContainer extends React.Component {\n  props: Props;\n  state: State;\n\n  constructor(props: Object) {\n    super(props);\n    const {userID, ...restProps} = props;\n    this.state = {\n      userID,\n      componentProps: restProps,\n      error: null,\n      showTokenInput: false,\n      loading: false,\n      token: '',\n    };\n  }\n\n  getIsInitialize(): boolean{\n    return !!this.state.userID;\n  }\n\n  componentDidMount(): void {\n    if (this.getIsInitialize()) {\n      return;\n    }\n\n    WebViewUtils.isInExtention((isInExtention: bool) => {\n      if (!isInExtention) {\n        // try to fetch from cookie\n        const token = WebViewUtils.getUserToken();\n        if (token) {\n          this._fetchProps(\n            {u: token},\n            () => {},\n            () => {\n              // It's possible token is stored but is no longer valid\n              this.setState({\n                showTokenInput: true,\n              });\n            },\n          );\n        } else {\n          this.setState({\n            showTokenInput: true,\n          });\n        }\n\n        return;\n      }\n\n      WebViewUtils.getUserID((userFBID: string) => {\n        this._fetchProps({fbid: userFBID});\n      });\n    });\n  }\n\n  render(): React.Element<any> {\n    if (!this.getIsInitialize()) {\n      return this._renderUninitializedView();\n    }\n\n    const Component = this.props.Component;\n    return (\n      <Component\n        userID={this.state.userID}\n        {...this.state.componentProps}\n      />\n    );\n  }\n\n  _renderUninitializedView(): React.Element<*> {\n    let content = this.state.showTokenInput\n      ? <div>\n          {this._renderErrorAlert()}\n          <h5><label>{this.props.text.notSupportedText}</label></h5>\n          {this._renderTokenInput()}\n        </div>\n      : <OverlaySpinner />;\n\n    let footer = this.state.showTokenInput\n      ? this._renderFooter()\n      : null;\n\n    return (\n      <div>\n        {this.state.loading ? <OverlaySpinner /> : null}\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-xs-12 col-sm-10 col-sm-offset-1 col-md-6 col-md-offset-3\">\n              {content}\n            </div>\n          </div>\n        </div>\n        {footer}\n      </div>\n    );\n  }\n\n  _renderErrorAlert(): ?React.Element<*> {\n    if (!this.state.error) {\n      return null;\n    }\n    return (\n      <div className=\"alertHeader alert alert-danger\" role=\"alert\">\n        {this.state.error}\n      </div>\n    );\n  }\n\n  _renderTokenInput(): React.Element<*> {\n    return (\n      <div className=\"form-group\">\n        <input\n          className=\"form-control\"\n          class=\"form-control\"\n          placeholder=\"<token>\"\n          value={this.state.token}\n          onChange={(event: Object) => this.setState({token: event.target.value})}\n        />\n      </div>\n    );\n  }\n\n  _renderFooter(): React.Element<*> {\n    return (\n      <Footer\n        text={this.props.text.enterButton}\n        onClick={this._submit}\n      />\n    );\n  }\n\n  _fetchProps(req: Object, success?: Function, fail?: Function): void {\n    $.get(this.props.jsonURL, req)\n      .done((res: Object) => {\n        const {userID, ...restProps} = res;\n        this.setState({\n          userID,\n          componentProps: restProps,\n        });\n\n        success && success();\n      })\n      .fail((res: Object) => {\n        this.setState({\n          error: res.responseText,\n        });\n        fail && fail();\n      });\n  }\n\n  // submit the bot token and store in cookie\n  _submit = (): void => {\n    this._fetchProps({u: this.state.token}, () => {\n      WebViewUtils.storeUserToken(this.state.token);\n    });\n  }\n}\n\nmodule.exports = {\n  setup: (Component: Object) => {\n    global.setup = function(rootID: string, props: Object, getPropsURL: string) {\n      ReactDOM.render(\n        <UserLoaderContainer\n          {...props}\n          Component={Component}\n          jsonURL={getPropsURL}\n        />,\n        document.getElementById(rootID),\n      );\n    }\n  },\n};\n\n\n\n/** WEBPACK FOOTER **\n ** public/src/js/common/UserLoaderContainer.jsx\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 13\n ** module chunks = 0\n **/","/*\n * @flow\n */\n\n'use strict';\n\nimport React, {PropTypes} from 'react';\nimport FooterWrapper from './FooterWrapper.jsx';\n\nclass Footer extends React.PureComponent {\n  props: {\n    text: string,\n    onClick: () => void,\n    disabled?: boolean,\n  };\n\n  render(): React.Element<*> {\n    return (\n      <FooterWrapper>\n        <div className=\"col-xs-12 col-sm-10 col-sm-offset-1 col-md-6 col-md-offset-3\">\n          <button\n            type=\"button\"\n            className=\"btn btn-primary btn-lg btn-block\"\n            disabled={this.props.disabled}\n            onClick={this.props.onClick}>\n            {this.props.text}\n          </button>\n        </div>\n      </FooterWrapper>\n    );\n  }\n}\n\nmodule.exports = Footer;\n\n\n\n/** WEBPACK FOOTER **\n ** public/src/js/common/Footer.jsx\n **/","/*\n * @flow\n */\n\n'use strict';\n\nimport React, {PropTypes} from 'react';\n\nclass FooterWrapper extends React.PureComponent {\n  render(): React.Element<*> {\n    return (\n      <div className=\"footer\">\n        <div className=\"container\">\n          <div className=\"row\">\n            {this.props.children}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nmodule.exports = FooterWrapper;\n\n\n\n/** WEBPACK FOOTER **\n ** public/src/js/common/FooterWrapper.jsx\n **/","/*\n * @flow\n */\n\n'use strict';\n\nlet MessengerExtensions = null;\n\n// FB Messenger plugin is loaded asynchornously. We would use a polling approach\n// to make sure the extension is loaded.\nwindow.extAsyncInit = function() {\n  MessengerExtensions = require('MessengerExtensions');\n};\n\n// check if MessengerExtension is initialized\nfunction getExtension(success: (val: Object) => void): void {\n  console.log(MessengerExtensions);\n  if (MessengerExtensions) {\n    success(MessengerExtensions);\n    return;\n  }\n  setTimeout(getExtension, 150, success);\n}\n\nfunction isInExtention(success: (val: bool) => void): void {\n  getExtension((MessengerExtensions: Object): void => {\n    success(MessengerExtensions.isInExtension());\n  });\n}\n\nfunction getUserID(success: (userFBID: string) => void): void {\n  getExtension((MessengerExtensions: Object): void => {;\n    MessengerExtensions.getSupportedFeatures(\n      (result: Object) => {\n        console.log(result);\n      },\n      (err: Object) => {\n        console.log(err);\n      }\n    );\n\n    MessengerExtensions.getUserID((uids: Object): void => {\n      success(uids.psid);\n    }, function error(err, errorMessage) {\n      // doesn't work on desktop so use context\n      MessengerExtensions.getContext(\n        '1833481820212349', // app_id\n        (result: Object) => {\n          console.log(result.psid);\n          success(result.psid);\n        },\n        (err: Object) => {\n          console.log(err);\n        }\n      );\n\n    });\n  });\n}\n\nfunction closeWebView(): void {\n  const MessengerExtensions = require('MessengerExtensions');\n  const isSupported = MessengerExtensions.isInExtension();\n\n  if (isSupported) {\n    MessengerExtensions.requestCloseBrowser(function success() {}, function error(err) {});\n  } else {\n    window.close();\n  }\n}\n\nfunction storeUserToken(id: string): void {\n  _setCookie('u', id, 28);\n}\n\nfunction getUserToken(): string {\n  return getCookie('u');\n}\n\nfunction _setCookie(cname, cvalue, exdays) {\n  var d = new Date();\n  d.setTime(d.getTime() + (exdays*24*60*60*1000));\n  var expires = \"expires=\"+ d.toUTCString();\n  document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n}\n\nfunction getCookie(cname) {\n  var name = cname + \"=\";\n  var decodedCookie = decodeURIComponent(document.cookie);\n  var ca = decodedCookie.split(';');\n  for(var i = 0; i <ca.length; i++) {\n      var c = ca[i];\n      while (c.charAt(0) == ' ') {\n          c = c.substring(1);\n      }\n      if (c.indexOf(name) == 0) {\n          return c.substring(name.length, c.length);\n      }\n  }\n  return \"\";\n}\n\nmodule.exports = {\n  closeWebView,\n  getUserID,\n  isInExtention,\n  storeUserToken,\n  getUserToken,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** public/src/js/common/WebViewUtils.js\n **/","module.exports = MessengerExtensions;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"MessengerExtensions\"\n ** module id = 17\n ** module chunks = 0\n **/"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AClCA;AACA;;;AACA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;;;;;;;;;AACA;AACA;AACA;AAOA;;;AAUA;AAAA;AACA;AADA;AACA;AADA;AA2HA;AACA;AACA;AA7HA;AA+HA;AACA;AACA;AA/HA;AACA;AAGA;AAJA;AAFA;AAQA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AAGA;AACA;AACA;;AAEA;AACA;AADA;AAGA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AAAA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAJA;AADA;AADA;AADA;AAkBA;;;AAEA;AACA;AACA;;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAIA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AALA;AADA;AAFA;AADA;AAeA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AADA;AAFA;AADA;AAcA;;;AAUA;AACA;AACA;AAAA;AACA;AADA;AAIA;;;;AAlJA;AACA;AADA;AAIA;AACA;AACA;AACA;AAJA;AACA;AACA;AAgJA;;;;;;AC3KA;;;;;;ACAA;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC3CA;AACA;;;AACA;AACA;;;;;;;;;;;AACA;;;;;;;;;;;AACA;AACA;AACA;AAAA;AACA;AADA;AAIA;;;;AAPA;AACA;AASA;;;;;;;;ACdA;AACA;;;;;AACA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;;;;;;;;;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;;AAEA;AARA;AACA;AAyBA;;;;;;;;;;;;;;AAqDA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;;;;;AAlEA;AACA;AACA;;;AAEA;AACA;AACA;;;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AAJA;AACA;AAMA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAwBA;AACA;AACA;;;AAEA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;;;;AAtFA;AACA;AAwFA;;;;;;AC/HA;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACzFA;AACA;;;;;AACA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;;;;;;;;;;;AAiBA;;;AAIA;AAAA;AACA;AADA;AACA;AADA;AAqJA;AACA;AACA;AACA;AACA;AAzJA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAHA;AAWA;AACA;;;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAKA;AACA;AADA;AAGA;AAEA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AADA;AAKA;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAHA;AACA;AAMA;AACA;AAGA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AADA;AADA;AAOA;AATA;AAYA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAIA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AALA;AADA;AAUA;;;AAEA;AACA;AAEA;AACA;AAFA;AAKA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AAFA;AACA;AAIA;AACA;AAEA;AACA;AADA;AAGA;AACA;AACA;AACA;;;;;;AAtJA;AACA;AA8JA;AACA;AACA;AACA;AAGA;AACA;AAHA;AAOA;AACA;AAZA;;;;;;;AC7LA;;;;;;;;ACIA;AACA;;;AACA;AACA;;;AAAA;AACA;;;;;;;;;;;AACA;;;;;;;;;;;AAOA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AADA;AADA;AAYA;;;;AArBA;AACA;AAuBA;;;;;;;;AC7BA;AACA;;;AACA;AACA;;;;;;;;;;;AACA;;;;;;;;;;;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AADA;AADA;AAQA;;;;AAXA;AACA;AAaA;;;;;;;;AClBA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;ACtGA;;;","sourceRoot":""}