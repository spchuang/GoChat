'use strict';

var fs = require('fs');
var path = require('path');
var Sequelize = require('sequelize');
var config = require('../../config.js');
var sequelize = new Sequelize(config.database, config.username, config.password, config);
var db = {};

fs.readdirSync(__dirname).filter(function (file) {
  return file.indexOf('.') !== 0 && file !== 'index.js';
}).forEach(function (file) {
  var model = sequelize.import(path.join(__dirname, file));
  db[model.name] = model;
});

Object.keys(db).forEach(function (modelName) {
  if ('associate' in db[modelName]) {
    db[modelName].associate(db);
  }
});

db.sequelize = sequelize;
db.Sequelize = Sequelize;

module.exports = db;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jbGFzcy9zY2hlbWEvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBSSxLQUFLLFFBQVEsSUFBUixDQUFUO0FBQ0EsSUFBSSxPQUFPLFFBQVEsTUFBUixDQUFYO0FBQ0EsSUFBSSxZQUFZLFFBQVEsV0FBUixDQUFoQjtBQUNBLElBQUksU0FBUyxRQUFRLGlCQUFSLENBQWI7QUFDQSxJQUFJLFlBQVksSUFBSSxTQUFKLENBQWMsT0FBTyxRQUFyQixFQUErQixPQUFPLFFBQXRDLEVBQWdELE9BQU8sUUFBdkQsRUFBaUUsTUFBakUsQ0FBaEI7QUFDQSxJQUFJLEtBQUssRUFBVDs7QUFFQSxHQUNHLFdBREgsQ0FDZSxTQURmLEVBRUcsTUFGSCxDQUVVLFVBQVMsSUFBVCxFQUFlO0FBQ3JCLFNBQVEsS0FBSyxPQUFMLENBQWEsR0FBYixNQUFzQixDQUF2QixJQUE4QixTQUFTLFVBQTlDO0FBQ0QsQ0FKSCxFQUtHLE9BTEgsQ0FLVyxVQUFTLElBQVQsRUFBZTtBQUN0QixNQUFJLFFBQVEsVUFBVSxNQUFWLENBQWlCLEtBQUssSUFBTCxDQUFVLFNBQVYsRUFBcUIsSUFBckIsQ0FBakIsQ0FBWjtBQUNBLEtBQUcsTUFBTSxJQUFULElBQWlCLEtBQWpCO0FBQ0QsQ0FSSDs7QUFVQSxPQUFPLElBQVAsQ0FBWSxFQUFaLEVBQWdCLE9BQWhCLENBQXdCLFVBQVMsU0FBVCxFQUFvQjtBQUMxQyxNQUFJLGVBQWUsR0FBRyxTQUFILENBQW5CLEVBQWtDO0FBQ2hDLE9BQUcsU0FBSCxFQUFjLFNBQWQsQ0FBd0IsRUFBeEI7QUFDRDtBQUNGLENBSkQ7O0FBTUEsR0FBRyxTQUFILEdBQWUsU0FBZjtBQUNBLEdBQUcsU0FBSCxHQUFlLFNBQWY7O0FBT0EsT0FBTyxPQUFQLEdBQWlCLEVBQWpCIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZnMgPSByZXF1aXJlKCdmcycpO1xudmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG52YXIgU2VxdWVsaXplID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vLi4vY29uZmlnLmpzJyk7XG52YXIgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZShjb25maWcuZGF0YWJhc2UsIGNvbmZpZy51c2VybmFtZSwgY29uZmlnLnBhc3N3b3JkLCBjb25maWcpO1xudmFyIGRiID0ge307XG5cbmZzXG4gIC5yZWFkZGlyU3luYyhfX2Rpcm5hbWUpXG4gIC5maWx0ZXIoZnVuY3Rpb24oZmlsZSkge1xuICAgIHJldHVybiAoZmlsZS5pbmRleE9mKCcuJykgIT09IDApICYmIChmaWxlICE9PSAnaW5kZXguanMnKTtcbiAgfSlcbiAgLmZvckVhY2goZnVuY3Rpb24oZmlsZSkge1xuICAgIHZhciBtb2RlbCA9IHNlcXVlbGl6ZS5pbXBvcnQocGF0aC5qb2luKF9fZGlybmFtZSwgZmlsZSkpO1xuICAgIGRiW21vZGVsLm5hbWVdID0gbW9kZWw7XG4gIH0pO1xuXG5PYmplY3Qua2V5cyhkYikuZm9yRWFjaChmdW5jdGlvbihtb2RlbE5hbWUpIHtcbiAgaWYgKCdhc3NvY2lhdGUnIGluIGRiW21vZGVsTmFtZV0pIHtcbiAgICBkYlttb2RlbE5hbWVdLmFzc29jaWF0ZShkYik7XG4gIH1cbn0pO1xuXG5kYi5zZXF1ZWxpemUgPSBzZXF1ZWxpemU7XG5kYi5TZXF1ZWxpemUgPSBTZXF1ZWxpemU7XG5cbmV4cG9ydCB0eXBlIFNlcXVlbGl6ZU1vZGVsID0ge1xuICBkYXRhVmFsdWVzOiBPYmplY3QsXG4gIGdldDogRnVuY3Rpb24sXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRiO1xuIl19